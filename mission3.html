<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>8th Wall Embed</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    html, body { height:100%; margin:0; background:#000; font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .wrap { position:fixed; inset:0; }
    .frame { width:100%; height:100%; border:0; display:block; }
    .gate { position:absolute; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.85); color:#fff; z-index:2; }
    .gate[hidden] { display:none; }
    .gate button { font-size:18px; padding:14px 20px; border-radius:12px; border:0; cursor:pointer; }
    .hint { position:absolute; left:50%; bottom:12px; transform:translateX(-50%); color:#bbb; font-size:12px; text-align:center; padding:0 12px; z-index:3; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- 일부 브라우저(iOS Safari 등)에서 사용자 제스처 후 카메라 시작을 보장 -->
    <div id="gate" class="gate">
      <div style="text-align:center; max-width:360px;">
        <h2 style="margin:0 0 12px;">Start AR</h2>
        <p style="margin:0 0 16px; line-height:1.4;">카메라 권한을 허용하고 AR을 시작합니다.</p>
        <button id="startBtn">AR 시작</button>
      </div>
    </div>

    <iframe
      id="xrframe"
      class="frame"
      title="8th Wall AR"
      src="https://realmetawinner.8thwall.app/turtle-ar/"
      allow="camera; microphone; gyroscope; accelerometer; xr-spatial-tracking; fullscreen"
      allowfullscreen
      loading="eager"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>

    <div class="hint">
      문제가 있으면 이 도메인이 8th Wall의 Allowed Domains(Embed)에 추가되어 있는지 확인하세요.
    </div>
  </div>

  <script>
    const gate  = document.getElementById('gate');
    const btn   = document.getElementById('startBtn');
    const frame = document.getElementById('xrframe');

    // iOS 등에서 사용자 제스처 후 전체화면/포커스 시도 (실패해도 무시)
    btn.addEventListener('click', async () => {
      gate.hidden = true;
      try { if (frame.requestFullscreen) await frame.requestFullscreen(); } catch(e) {}
      frame.focus();
    });

    // 데스크톱 등에서는 자동 시작을 원하면 아래 주석을 해제해 게이트를 생략할 수 있습니다.
    // if (!/iPhone|iPad|iPod/i.test(navigator.userAgent)) gate.hidden = true;
  </script>
</body>
</html>
