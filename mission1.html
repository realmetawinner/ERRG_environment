<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR 타겟 인식 - 기본 줌 아웃</title>
    
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <link rel="stylesheet" href="css/ar-style.css">
</head>
<body>

    <div id="ar-container">
        <a-scene embedded arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
            <a-marker id="ar-marker" type='pattern' url='person1.patt'>
                <a-image src="images/overlay-person1.png" rotation="-90 0 0" scale="1 1 1"></a-image>
            </a-marker>
            <a-entity id="ar-camera" camera></a-entity>
        </a-scene>
    </div>

    <div class="button-container">
        <button id="action-button">다음 페이지로 이동</button>
    </div>

    <script src="js/ar-logic.js"></script>

    <script>
        window.addEventListener('load', function() {
            const scene = document.querySelector('a-scene');
            
            // AR Scene이 완전히 로드될 때까지 기다립니다.
            scene.addEventListener('loaded', function () {
                const arCamera = document.getElementById('ar-camera');
                
                // A-Frame의 카메라 객체가 준비될 때까지 잠시 기다립니다.
                setTimeout(() => {
                    const cameraObject = arCamera.getObject3D('camera');
                    if (cameraObject) {
                        // zoom 값을 1보다 작게 설정하여 줌 아웃 효과를 줍니다.
                        // 0.7은 70% 크기로 축소하는 것을 의미합니다. (0.5 ~ 0.8 사이 값 추천)
                        cameraObject.zoom = 0.7; 
                        
                        // 변경된 줌 값을 적용하기 위해 카메라 설정을 업데이트합니다.
                        cameraObject.updateProjectionMatrix();
                        
                        console.log('Default camera zoom set to:', cameraObject.zoom);
                    }
                }, 500); // 0.5초 후에 실행 (카메라 초기화 시간을 고려)
            });
        });
    </script>
</body>
</html>
